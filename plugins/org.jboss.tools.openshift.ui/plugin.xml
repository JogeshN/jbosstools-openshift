<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
	<extension
		point="org.eclipse.ui.navigator.viewer">
		<viewerContentBinding
			viewerId="org.jboss.tools.openshift.express.ui.explorer.expressConsoleView">
			<includes>
				<contentExtension
					isRoot="true"
					pattern="org.jboss.tools.openshift.ui.explorer.navigatorContent">
				</contentExtension>
			</includes>
		</viewerContentBinding>
	</extension>
	<extension
		point="org.eclipse.ui.navigator.navigatorContent">
		<navigatorContent
			id="org.jboss.tools.openshift.ui.explorer.navigatorContent"
			contentProvider="org.jboss.tools.openshift.internal.ui.explorer.OpenShiftExplorerContentProvider"
			labelProvider="org.jboss.tools.openshift.internal.ui.explorer.OpenShiftExplorerLabelProvider"
			name="org.jboss.tools.openshift.ui.explorer.navigatorContent">
			<possibleChildren>
				<or>
					<instanceof
						value="com.openshift3.client.model.IProject">
					</instanceof>
					<instanceof
						value="com.openshift3.client.model.IService">
					</instanceof>
					<instanceof
						value="com.openshift3.client.model.IPod">
					</instanceof>
					<instanceof
						value="com.openshift3.client.model.IReplicationController">
					</instanceof>
					<instanceof
						value="com.openshift3.client.model.IBuildConfig">
					</instanceof>
					<instanceof
						value="com.openshift3.client.model.IDeploymentConfig">
					</instanceof>
    	        </or>
			</possibleChildren>
			<triggerPoints>
				<instanceof
					value="org.jboss.tools.openshift.core.connection.Connection">
				</instanceof>
			</triggerPoints>
		</navigatorContent>
	</extension>
	<extension
		point="org.eclipse.ui.menus">
		<!-- openshift explorer context menu: new connection -->
		<menuContribution
			locationURI="popup:org.jboss.tools.openshift.express.ui.explorer.expressConsoleViewPopup.new?after=additions">
				<command
					commandId="org.jboss.tools.openshift.ui.command.newdeploymentconfig"
					id="org.jboss.tools.openshift.ui.command.newdeploymentconfig"
					style="push">
					<visibleWhen>
						<with
							variable="selection">
							<iterate>
								<instanceof
									value="com.openshift.kube.Project">
								</instanceof>
							</iterate>
						</with>
					</visibleWhen>
				</command>
		</menuContribution>
	</extension>
	<extension
		point="org.eclipse.ui.handlers">
			<handler
				class="org.jboss.tools.openshift.internal.ui.command.NewDeploymentHandler"
				commandId="org.jboss.tools.openshift.ui.command.newdeploymentconfig">
			</handler>
	</extension>
	<!-- adapters -->
	<extension
		point="org.eclipse.core.runtime.adapters">
		<factory
              adaptableType="com.openshift.internal.kube.Resource"
              class="org.jboss.tools.openshift.internal.ui.property.OpenShiftPropertySourceAdapterFactory">
			<adapter
				type="org.eclipse.ui.views.properties.IPropertySource">
			</adapter>
		</factory>
	</extension>
	<!-- definitions -->
	<extension
		point="org.eclipse.core.expressions.definitions">
		<definition
			id="org.tools.openshift.express.ui.isOpenShiftProjectSelected">
			<with
				variable="selection">
				<iterate
					ifEmpty="false"
					operator="and">
					<count
						value="1" />
					<or>
						<instanceof
							value="com.openshift.kube.Project"/>
					</or>
				</iterate>
			</with>
		</definition>
	</extension>
   <extension
         point="org.eclipse.ui.startup">
      <startup
            class="org.jboss.tools.openshift.internal.ui.OpenShiftUIActivator">
      </startup>
   </extension>

</plugin>
